
------------------------------------------------------------------------------
------------------------------      QUESTION    ------------------------------
------------------------------------------------------------------------------

# what is ...
    - not_include?
    - max sent length?



------------------------------------------------------------------------------
------------------------------  CDR STATISTIC  ------------------------------
------------------------------------------------------------------------------



------------------------------  <train_filter>  ------------------------------

    ----------------------- DATA ----------------------
    Documents                       500
    
    Pairs
                                    1:CID:2   	1038 
                                    1:NR:2    	4202 
                                    not_include	192  

    Entities
                                    Chemical  	1467 
                                    Disease   	1965 

    Mentions
                                    Chemical  	5162 
                                    Disease   	4252 

    Intra Pairs
                                    1:CID:2   	754  
                                    1:NR:2    	1456 
                                    not_include	116  

    Inter Pairs
                                    1:CID:2   	284  
                                    1:NR:2    	2746 
                                    not_include	76   

    Average/Max Sentence Distance
                                    1:CID:2   	1.8	8
                                    1:NR:2    	2.8	15
                                    not_include	1.9	11


    Average entites/doc             6.9
    Max                             21
    
    Average mentions/doc            18.8
    Max                             60
    
    Average mentions/entity         2.7
    Max                             29
    
    Average sents/doc               9.2
    Max                             26
    
    Average/max sent length         25.6
    Max                             154
    



------------------------------  <dev_filter>  ------------------------------

    ----------------------- DATA ----------------------
    Documents                       500
    
    Pairs
                                    1:CID:2   	1012 
                                    1:NR:2    	4075 
                                    not_include	174  

    Entities
                                    Chemical  	1507 
                                    Disease   	1864 

    Mentions
                                    Chemical  	5307 
                                    Disease   	4328 

    Intra Pairs
                                    1:CID:2   	766  
                                    1:NR:2    	1597 
                                    not_include	112  

    Inter Pairs
                                    1:CID:2   	246  
                                    1:NR:2    	2478 
                                    not_include	62   

    Average/Max Sentence Distance
                                    1:CID:2   	2.3	13
                                    1:NR:2    	2.6	18
                                    not_include	1.9	8


    Average entites/doc             6.7
    Max                             20
    
    Average mentions/doc            19.3
    Max                             59
    
    Average mentions/entity         2.9
    Max                             17
    
    Average sents/doc               9.3
    Max                             33
    
    Average/max sent length         25.4
    Max                             225
    



------------------------------  <test_filter>  ------------------------------

    ----------------------- DATA ----------------------
    Documents                       500
    
    Pairs
                                    1:CID:2   	1066 
                                    1:NR:2    	4138 
                                    not_include	201  

    Entities
                                    Chemical  	1434 
                                    Disease   	1988 

    Mentions
                                    Chemical  	5370 
                                    Disease   	4430 

    Intra Pairs
                                    1:CID:2   	747  
                                    1:NR:2    	1545 
                                    not_include	111  

    Inter Pairs
                                    1:CID:2   	319  
                                    1:NR:2    	2593 
                                    not_include	90   

    Average/Max Sentence Distance
                                    1:CID:2   	1.8	16
                                    1:NR:2    	2.8	16
                                    not_include	1.8	11


    Average entites/doc             6.8
    Max                             22
    
    Average mentions/doc            19.6
    Max                             69
    
    Average mentions/entity         2.9
    Max                             22
    
    Average sents/doc               9.7
    Max                             22
    
    Average/max sent length         25.7
    Max                             148




I have also been crawling these threads on this topic.

Step 1: Split the data into 80,000 training and 20,000 test sets.

Step 2: Using cross validation, train and evaluate the performance of each model on the 80,000 training set (e.g. using 10 fold cv I would be training on 72,000 and testing against 8,000 10 times).

Ok up to this point!

Step 3: Use the 20,000 test set to see how well the models generalize to unseen data, and pick a winner (say ridge).

Either do this on a portion of the training set that was not used to tune parameters, or implement nested cross validation in your training set (e.g., use 3/4 of each fold to train and 1/4 to select among RF, logistic regression, etc).

Step 4: Go back to the 80,000 training data and use cross validation to re-train the model and tune the ridge alpha level.

Step 5: Test the tuned model on the 20,000 test set.

This would not be a valid estimate of the error as you've already used this data to choose one of the three RF, LR, etc..

Step 6: Train tuned model on full dataset before putting into production.

Tuning the model should be considered a step in the training process.

Say you have 2 models: RF with param NE = 100, 200; LR with param C = 0.1, 0.2.

You have 2 options (you can mix and match them as long as you adhere to the basic principle: if you use data to make a decision, don't use that same data to evaluate):


Say you have 2 models: RF with param NE = 100, 200; LR with param C = 0.1, 0.2.

You have 2 options (you can mix and match them as long as you adhere to the basic principle: if you use data to make a decision, don't use that same data to evaluate):

A

Step 1. Split all data into train_validate and test. Put test in a vault.
Step 2. Split train_validate into train and validate.
Step 3. Train 2 RF on train with param NE = 100 and 200. Train 2 LR on train with param C=0.1 and 0.2. Try all four models on the validate. Choose the model model_se with the smallest error. This is your "modeling process".
Step 4. Unlock the vault and test model_se (as is) on test to get some error. This error (one number) will be expected error on unseen data.
(It appears you have many observations. There is no hard rule for this that I know of, but if your classes are balanced A might be most reasonable).

B

Convert step 1 into an (outer) loop. If you use 7 fold you will have 7 train_validates and 7 tests.

Convert step 2 and 4 into an (inner) loop. If you use 5 fold you will then 5 times create a train on which you will test the 4 models and then 5 times see which is best on validate. Take the model
model_ba with best average performance over folds.

Test model_ba on the test set (in the outer fold) each time (each
one will be a different model). Since within each outer loop you
have an estimate of error, you will have 7 estimates errors. The
average of these errors is E and the variance V.

Rerun the modeling process Steps 2 and 3 from scratch on the entire
dataset. Eg, take 100% of the data and run step 2 to 4 (use the same train:validate split ratios or 5 fold CV that you used there).
You will return some model M. You can expect performance E from model M on unseen data. The variance V unfortunately
cannot be used to construct a 95% confidence interval (Bengio, 2004).

B is also known as 'nested cross validation,' but it is actually just plain cross validation of an entire modeling process (that involves tuning both parameters and hyperparameters or considering hyperparameters to be parameters and just tuning parameters (see here)). If you choose, B, it is worth running multiple iterations of B to see the variance of the entire process.

Other methods such as bootstrap may be preferable to cross validation. I have not had time to work out the details of why this is true.

Share
Cite
Improve this answer
Follow
edited May 26, 2018 at 14:01



*** VLSP TRAIN ***


Documents                       173

Pairs
                                1:AFFILIATION:2	        208  
                                1:LOCATED:2	            223  
                                1:NR:2    	            3769 
                                1:PART – WHOLE:2	    429  
                                1:PERSONAL - SOCIAL:2	44   

Entities
                                LOCATION  	        839  
                                ORGANIZATION	    454  
                                PERSON    	        528  

Mentions
                                LOCATION  	        1596 
                                ORGANIZATION	    893  
                                PERSON    	        1342 

Intra Pairs
                                1:AFFILIATION:2	        208  
                                1:LOCATED:2	            223  
                                1:NR:2    	            3769 
                                1:PART – WHOLE:2	    429  
                                1:PERSONAL - SOCIAL:2	44   

Inter Pairs
                                1:AFFILIATION:2	        0    
                                1:LOCATED:2	            0    
                                1:NR:2    	            0    
                                1:PART – WHOLE:2	    0    
                                1:PERSONAL - SOCIAL:2   0    



*** VLSP DEV ***


    ----------------------- DATA ----------------------
    Documents                       69
    
    Pairs
                                    1:AFFILIATION:2	        105  
                                    1:LOCATED:2	            100  
                                    1:NR:2    	            1883 
                                    1:PART – WHOLE:2	    149  
                                    1:PERSONAL - SOCIAL:2	22   

    Entities
                                    LOCATION  	        337  
                                    ORGANIZATION	    208  
                                    PERSON    	        294  

    Mentions
                                    LOCATION  	        595  
                                    ORGANIZATION	    387  
                                    PERSON    	        644  

    Intra Pairs
                                    1:AFFILIATION:2	        105  
                                    1:LOCATED:2	            100  
                                    1:NR:2    	            1883 
                                    1:PART – WHOLE:2	    149  
                                    1:PERSONAL - SOCIAL:2	22   

    Inter Pairs
                                    1:AFFILIATION:2	        0    
                                    1:LOCATED:2	            0    
                                    1:NR:2    	            0    
                                    1:PART – WHOLE:2	    0    
                                    1:PERSONAL - SOCIAL:2	0                                    